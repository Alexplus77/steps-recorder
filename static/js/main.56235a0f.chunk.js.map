{"version":3,"sources":["components/Form.js","components/ItemResult.js","components/ResultList.js","App.js","index.js"],"names":["Form","handleDate","handleSubmit","handleSteps","steps","date","onSubmit","className","htmlFor","onChange","type","id","name","value","format","Date","required","placeholder","ItemResult","handleRemove","handleEditMode","edit","isEdit","cancelEditMode","handleSaveEditChange","idx","stepsAll","onClick","cn","ResultList","tableData","Fragment","length","map","nanoid","App","useState","setDate","setSteps","setEdit","setTableData","formattedDate","handleKey","e","console","log","keyCode","window","removeEventListener","updatedData","item","useEffect","addEventListener","target","alert","preventDefault","foundId","find","d","reduce","acc","Number","sumSteps","updateData","el","idItem","updateSubmit","filter","foundedItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.56235a0f.chunk.js","sourcesContent":["import \"App.css\";\nimport { format } from \"date-fns\";\n\nconst Form = ({ handleDate, handleSubmit, handleSteps, steps, date }) => {\n  return (\n    <form onSubmit={handleSubmit} className=\"form\">\n      <label className=\"labelDate\" htmlFor=\"date\">\n        Дата(ДД.ММ.ГГ)\n      </label>\n      <label className=\"labelDistance\" htmlFor=\"distance\">\n        Пройдено км\n      </label>\n      <input\n        onChange={handleDate}\n        type=\"date\"\n        className=\"inputDate\"\n        id=\"date\"\n        name=\"date\"\n        value={format(new Date(date), \"yyyy-MM-dd\")}\n        required={true}\n      />\n      <input\n        type=\"number\"\n        onChange={handleSteps}\n        required={true}\n        className=\"inputDistance\"\n        id=\"distance\"\n        name=\"distance\"\n        value={steps}\n        placeholder=\"Number\"\n      />\n      <button onSubmit={handleSubmit} className=\"submit\" type=\"submit\">\n        Ok\n      </button>\n    </form>\n  );\n};\nexport default Form;\n","import \"App.css\";\nimport React from \"react\";\nimport cn from \"classnames\";\nimport { format } from \"date-fns\";\nconst ItemResult = ({\n  id,\n  date,\n  steps,\n  handleRemove,\n  handleEditMode,\n  edit,\n  isEdit,\n  handleDate,\n  handleSteps,\n  cancelEditMode,\n  handleSaveEditChange,\n  idx,\n  stepsAll,\n}) => {\n  return edit ? (\n    <div className=\"form-edit\">\n      <input\n        onChange={handleDate}\n        type=\"date\"\n        className=\"inputDate\"\n        id=\"date\"\n        name=\"date\"\n        value={format(new Date(date), \"yyyy-MM-dd\")}\n        required={true}\n      />\n      <input\n        type=\"number\"\n        onChange={handleSteps}\n        required={true}\n        className=\"inputDistance\"\n        id=\"distance\"\n        name=\"distance\"\n        value={isEdit ? stepsAll : steps}\n        placeholder=\"Number\"\n      />\n      <button onClick={() => cancelEditMode(idx)} className=\"submit\">\n        cancel\n      </button>\n      <button className=\"submit\" onClick={() => handleSaveEditChange(id)}>\n        save\n      </button>\n    </div>\n  ) : (\n    <li className={cn(\"itemResult\", { \"itemResult activeItem\": edit })}>\n      <span>{format(new Date(date), \"dd-MM-yyyy\")}</span>\n      <span>{steps}</span>\n      <div className=\"icons\">\n        <i\n          className={cn(\"fa fa-pencil  fa-flip-horizontal\", {\n            \" fa-pencil-square-o\": edit,\n          })}\n          aria-hidden=\"true\"\n          onClick={() => handleEditMode(idx)}\n        />\n        <i\n          className=\"fa fa-times\"\n          onClick={() => !isEdit && handleRemove(id)}\n          aria-hidden=\"true\"\n        />\n      </div>\n    </li>\n  );\n};\nexport default ItemResult;\n","import \"App.css\";\nimport React from \"react\";\nimport ItemResult from \"./ItemResult\";\nimport { nanoid } from \"nanoid\";\nconst ResultList = ({\n  tableData,\n  handleRemove,\n  handleEditMode,\n  handleSaveEditChange,\n  isEdit,\n  handleDate,\n  handleSteps,\n  handleSubmit,\n  cancelEditMode,\n  stepsAll,\n}) => {\n  return (\n    <React.Fragment>\n      <div className=\"titleResult\">\n        <span>Дата(ДД.ММ.ГГ)</span>\n        <span>Пройдено км</span>\n        <span>Действия</span>\n      </div>\n      <ul className=\"resultList\">\n        {tableData.length > 0 ? (\n          tableData.map(({ date, steps, id, edit }, idx) => (\n            <ItemResult\n              key={nanoid()}\n              date={date}\n              stepsAll={stepsAll}\n              handleRemove={handleRemove}\n              handleEditMode={handleEditMode}\n              steps={steps}\n              id={id}\n              edit={edit}\n              isEdit={isEdit}\n              handleDate={handleDate}\n              handleSteps={handleSteps}\n              handleSubmit={handleSubmit}\n              cancelEditMode={cancelEditMode}\n              idx={idx}\n              handleSaveEditChange={handleSaveEditChange}\n            />\n          ))\n        ) : (\n          <li className=\"noData\">No data to display</li>\n        )}\n      </ul>\n    </React.Fragment>\n  );\n};\nexport default ResultList;\n","import \"App.css\";\nimport Form from \"components/Form\";\nimport ResultList from \"components/ResultList\";\nimport { useState, useEffect } from \"react\";\nimport { format } from \"date-fns\";\n\nconst App = () => {\n  const [date, setDate] = useState(new Date());\n  const [steps, setSteps] = useState(1);\n  const [edit, setEdit] = useState(false);\n\n  const [tableData, setTableData] = useState([]);\n  const formattedDate = format(new Date(date), \"yyyy-MM-dd\");\n\n  /**\n   * Функция handleKey очень простая\n   * если мы нажали на escape - с окна снимается прослушчик событий\n   * и мы больше не следим за нажатиями клавиш, так как нам надо следить\n   * за нажатием клавиш лишь в режиме редактирования! Если нет режима редактирования\n   * то и следить незачем. Ну и по клику на escape вызывается хук setEdit и отменяет глобальный режим редактирования\n   * и также надо пройти по всем записям и отменить edit true у которой есть;\n   */\n  const handleKey = (e) => {\n    console.log(\"e.keyCode\", e.keyCode);\n    if (e.keyCode === 27) {\n      window.removeEventListener(\"keydown\", handleKey);\n      setEdit(false);\n      const updatedData = tableData.map((item) =>\n        item.edit ? { ...item, edit: false } : item\n      );\n      setTableData(updatedData);\n    }\n  };\n\n  /**\n   * хук useEffect - это как наблюдатель\n   * в нашем случае, он следит за edit - и как только\n   * edit меняется он вызывается, в нашем случае\n   * как только edit true на все окно навешивается событие\n   * и мы получаем коды всех клавиш и на каждый клик\n   * вызывается функция handleKey\n   */\n  useEffect(() => {\n    console.log(\"вызываем хук useEffect только когда изменился edit!\");\n    window.addEventListener(\"keydown\", handleKey);\n    return () => window.removeEventListener(\"keydown\", handleKey);\n  }, [edit]);\n\n  const handleDate = ({ target: { value } }) => {\n    if (\n      format(new Date(value), \"yyyy-MM-dd\") > format(new Date(), \"yyyy-MM-dd\")\n    ) {\n      alert(\"Дата не может быть больше текущей даты\");\n    } else {\n      setDate(value);\n    }\n  };\n  const handleSteps = ({ target }) => {\n    setSteps(target.value);\n  };\n  const clearForm = () => {\n    setDate(new Date());\n    setSteps(1);\n    setEdit(false);\n  };\n  const sumSteps = (foundId) => {\n    return tableData.reduce((acc, item) => {\n      if (item.id === foundId) {\n        return [\n          ...acc,\n          {\n            ...item,\n            steps: Number(item.steps) + Number(steps),\n          },\n        ];\n      }\n      item.edit = false;\n      return [...acc, item];\n    }, []);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (steps <= 0 || !date) {\n      return;\n    }\n    const foundId = tableData.find((d) => d.id === formattedDate)?.id;\n\n    if (foundId && !edit) {\n      setTableData(sumSteps(foundId));\n    } else if (edit) {\n      const updateData = tableData.map((el) => {\n        if (el.id === foundId) {\n          el.steps = steps;\n          el.id = formattedDate;\n          el.date = formattedDate;\n          el.edit = false;\n        }\n\n        return el;\n      });\n      setTableData(updateData);\n    } else {\n      setTableData([\n        ...tableData,\n        {\n          id: formattedDate,\n          date: formattedDate,\n          steps,\n        },\n      ]);\n    }\n    clearForm();\n  };\n\n  const handleRemove = (idItem) => {\n    const updateSubmit = tableData.filter(({ id }) => id !== idItem);\n    setTableData(updateSubmit);\n  };\n\n  /**\n   * отключаем режим редактирования у конкретной записи\n   */\n  const cancelEditMode = (id) => {\n    const updatedData = [...tableData];\n    updatedData[id].edit = false;\n    setTableData(updatedData);\n    setEdit(false);\n  };\n\n  /**\n   * Включаем режим редактирования у конкретной записи\n   * также включаем глобальный режим редактирования,\n   * чтобы понимать, что наше приложение редактируется\n   */\n  const handleEditMode = (id) => {\n    const updatedData = [...tableData];\n    updatedData[id].edit = true;\n    setTableData(updatedData);\n    setEdit(true);\n  };\n\n  /**\n   * Функция для сохранения записи, после редактирования (вызывается по клику на кнопку save)\n   */\n  const handleSaveEditChange = (idItem) => {\n    const foundedItem = tableData.find((el) => el.id === idItem);\n    foundedItem.steps = steps;\n    foundedItem.edit = false;\n    setEdit(false);\n    // твоя реализация\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"title\">Учёт тренировок</div>\n      <Form\n        handleDate={handleDate}\n        handleSteps={handleSteps}\n        handleSubmit={handleSubmit}\n        date={date}\n        steps={steps}\n        edit={edit}\n      />\n      <ResultList\n        stepsAll={steps}\n        handleEditMode={handleEditMode}\n        handleRemove={handleRemove}\n        tableData={tableData}\n        isEdit={edit}\n        handleDate={handleDate}\n        handleSteps={handleSteps}\n        cancelEditMode={cancelEditMode}\n        handleSaveEditChange={handleSaveEditChange}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}